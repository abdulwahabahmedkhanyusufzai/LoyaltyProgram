
    <img
      src="https://cdn.shopify.com/s/files/1/0921/8428/1416/files/Star1.svg?v=1760786787"
      alt="Star Icon"
      width="18"
      height="18"
    />
    {% assign ratio = section.settings.earning_ratio | default: 0.1 | plus: 0.0 %}
    
    {% comment %} Try Variant Price first, then Product Price {% endcomment %}
    {% assign product_price_cents = product.selected_or_first_available_variant.price | default: product.price %}
    
    {% assign product_price_float = product_price_cents | divided_by: 100.0 %}
    {% assign points_earned = product_price_float | times: ratio | round %}
    
    {% if product_price_cents > 0 %}
      <p>Earn <strong>{{ points_earned }} Points</strong> with this purchase!</p>
    {% else %}
      {% if request.design_mode %}
        <p>Earn Points (Price unavailable - verify Product Page)</p>
      {% endif %}
    {% endif %}

    <!-- VISIBLE DEBUG ONLY IN EDITOR -->
    {% if request.design_mode %}
      <div style="border: 1px solid red; color: red; font-size: 10px; padding: 5px; margin-top: 5px;">
        DEBUG: Price={{ product_price_cents }}, Ratio={{ ratio }}, ProductID={{ product.id }}
      </div>
    {% endif %}
  </div>

<style>
  .reward-points {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: #f8f8f8;
    padding: 8px 12px;
    border-radius: 8px;
    font-family: Arial, sans-serif;
    color: #333;
    font-size: 14px;
    width: fit-content;
    margin-top: 10px;
  }

  .reward-points img {
    width: 18px;
    height: 18px;
  }

  .reward-points p {
    margin: 0;
  }
</style>

{% schema %}
{
  "name": "Product Points Badge",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "earning_ratio",
      "label": "Earning Ratio (Points per $1)",
      "default": "0.1"
    }
  ]
}
{% endschema %}
